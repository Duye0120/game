# v0.0.2 - 交互式文件浏览界面

## 概述

v0.0.2 版本实现了一个交互式的、高度视觉化的文件浏览界面。该界面的核心设计思想是提供一种流畅且引人入胜的用户体验，让用户在浏览文件列表时能感受到动态的视觉反馈。

此版本的灵感来源于 Framer Motion 的官方示例，并在此基础上进行了定制化开发，旨在打造一个功能完善且美观的文件管理页面。

## 功能特性

- **双栏布局**: 左侧为可滚动的多彩文件卡片列表，右侧为当前选中文件的详细内容展示。
- **动态卡片动画**: 当文件卡片进入视口（viewport）时，会触发一个基于 `framer-motion` 的 "spring" 动画，卡片会从屏幕外弹入并带有轻微的旋转效果。
- **视口激活**: 左侧列表滚动时，通过 `whileInView` 和 `onViewportEnter` 钩子，自动将进入视口的文件标记为 "当前激活" 状态。
- **内容联动**: 右侧的内容区域会根据左侧激活的文件动态更新，并伴有淡入和横向移动的过渡动画。
- **多彩卡片背景**: 每个文件卡片都有一个独特的渐变背景色，颜色根据其在列表中的索引动态生成，创造出视觉上的多样性。
- **响应式设计**: 使用 SCSS Module (`index.module.scss`) 进行样式管理，为未来的响应式布局和主题定制打下基础。

## 组件结构

代码主要由两个 React 函数式组件构成：

### 1. `FileIdea` (主组件)

- **职责**:
    - 管理整个页面的布局和状态。
    - 模拟生成 30 个文件的数据 (`FileItem[]`)。
    - 维护当前激活文件的状态 (`activeFileId`)。
    - 渲染文件列表 (`FileCard`) 和内容详情区域。
- **状态管理**:
    - `activeFileId: number`: 存储当前在视口中或被选中的文件 ID。通过 `useState` 进行管理。

### 2. `FileCard` (文件卡片组件)

- **职责**:
    - 展示单个文件的摘要信息（文件名、日期）。
    - 实现自身的入场动画。
    - 根据 `index` 属性动态计算并应用渐变背景。
    - 当卡片进入视口时，调用 `onInView` 回调函数，通知父组件更新 `activeFileId`。
- **Props**:
    - `file: FileItem`: 文件数据对象。
    - `index: number`: 文件在列表中的索引，用于计算背景色。
    - `onInView: () => void`: 进入视口时的回调函数。

## 数据结构

文件项使用了统一的 `FileItem` 接口来定义其数据结构：

```typescript
interface FileItem {
  id: number;
  name: string;
  content: string;
  date: string;
}
```

## 动画效果 (Framer Motion)

动画是本界面的核心亮点，主要通过 `framer-motion` 库实现。

1.  **`cardVariants`**:
    - 定义了卡片 (`FileCard`) 的两种状态：`offscreen` (在屏幕外) 和 `onscreen` (在屏幕上)。
    - 使用 `spring` 类型的 `transition` 来创造富有弹性的物理动画效果。

    ```javascript
    const cardVariants: Variants = {
      offscreen: { y: 300 },
      onscreen: {
        y: 50,
        rotate: -10,
        transition: {
          type: 'spring',
          bounce: 0.4,
          duration: 0.8,
        },
      },
    };
    ```

2.  **`FileCard` 动画**:
    - `<motion.div>` 组件通过 `initial="offscreen"` 和 `whileInView="onscreen"` 应用了上述 `cardVariants`。
    - `viewport={{ amount: 0.8 }}` 表示当卡片 80% 进入视口时，即被视为 `inView`。

3.  **内容区域动画**:
    - 右侧内容详情区域在 `activeFile` 切换时，会触发一个新的动画。
    - 使用 `key={activeFile.id}` 来确保每次 ID 变化时，React 会重新渲染 `motion.div`，从而触发 `initial` 和 `animate` 动画。
    - `initial={{ opacity: 0, x: 50 }}` 和 `animate={{ opacity: 1, x: 0 }}` 实现了一个从右侧淡入的效果。

## 未来方向

- **真实数据集成**: 当前文件数据是静态模拟的。未来可以从 API 或本地文件系统动态获取数据。
- **性能优化**: 对于非常长的列表，可以考虑使用虚拟化滚动（如 `react-window` 或 `react-virtual`）来提高渲染性能。
- **交互增强**:
    - 增加点击卡片直接激活文件的功能。
    - 添加搜索和过滤功能。
    - 实现文件的增、删、改操作。
- **代码拆分**: 如果组件逻辑变得更加复杂，可以将 `FileCard` 和相关类型定义拆分到单独的文件中，以提高代码的可维护性。 
